#!/usr/bin/awk -f

BEGIN {
    FS=OFS=","
    IGNORECASE=1
    count=0
    match_pattern=ARGV[1]
    delete ARGV[1]
    if (ARGC < 3) {
        ARGC=3
        ARGV[2]=ENVIRON["HOME"]"/Dropbox/backups/enpass_export_latest.csv"
    }
}

{
    currF=substr($1,2,length($1)-2)
    
    if (tolower(currF) ~ tolower(match_pattern)) {
        count++
        name=currF
        printf "%d) %s\n", count, name
    }
}
